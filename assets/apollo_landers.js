const markerSvg = `<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 24.2.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" style="width: auto; height: 60px; xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 1000 800" style="enable-background:new 0 0 1000 800;" xml:space="preserve">
<style type="text/css">
	.st0{fill:#2F4265;}
	.st1{fill:#F2CC73;}
	.st2{fill:#FEFEFE;}
	.st3{fill:#E1E4EB;}
	.st4{fill:#FDFDFE;}
</style>
<path class="st0" d="M680.34,574.94c-2.36-0.15-4.75-0.17-7.11-0.01c-2.03,0.14-3.06-0.53-3.85-2.51
	c-11.05-27.73-22.22-55.42-33.27-83.15c-0.77-1.94-1.82-3.43-3.38-4.76c-11.4-9.69-22.74-19.45-34.15-29.13
	c-1.55-1.31-2.3-2.68-2.25-4.77c0.13-5.73,0.16-11.47-0.02-17.2c-0.07-2.28,0.85-3.32,2.76-4.22c5.29-2.49,10.46-5.24,15.75-7.72
	c3.12-1.45,4.43-3.72,4.41-7.08c-0.06-10.35-0.08-20.7,0.01-31.05c0.03-3.57-1.48-5.8-4.67-7.31c-6.08-2.86-12.03-5.99-18.11-8.85
	c-1.98-0.94-2.95-2.19-3.54-4.34c-3.71-13.38-10-25.46-19.05-36.02c-17.09-19.94-38.76-31.24-64.84-33.98
	c-2.45-0.25-3.1-0.97-3.03-3.32c0.17-5.23,0.11-10.48,0.02-15.71c-0.03-1.91,0.36-3.06,2.32-4.06c8.64-4.38,12.28-13.22,9.23-22.33
	c-0.68-2.03-0.21-3.1,1.18-4.45c6.07-5.92,12.02-11.96,18.05-17.92c1.89-1.88,3.12-3.95,2.27-6.67c-1.3-4.15-6.25-5.18-9.68-1.86
	c-6.27,6.08-12.43,12.27-18.55,18.49c-1.38,1.4-2.51,1.77-4.54,1.13c-9.58-3.04-19.19,1.39-22.86,10.28
	c-3.68,8.91,0,18.64,9.06,23.39c1.75,0.91,2.27,1.89,2.24,3.72c-0.09,5.36-0.17,10.72,0.03,16.08c0.09,2.49-0.83,3-3.13,3.23
	c-21.38,2.1-40.14,10.32-55.98,24.85c-2.2,2.01-3.01,1.55-4.87-0.3c-7.65-7.62-17.02-10.19-27.47-7.83
	c-13.62,3.06-22.83,14.8-22.92,28.59c-0.09,13.76,8.93,25.5,22.61,28.78c3.24,0.77,3.51,2.05,2.89,4.75
	c-1.07,4.63-1.43,9.36-1.44,14.1c-0.03,21.33-0.09,42.65-0.02,63.98c0.01,2.69-0.65,4.67-2.6,6.6c-9.57,9.47-19,19.09-28.49,28.64
	c-0.98,0.98-1.83,1.98-2.43,3.26c-12.11,26.06-24.48,52.01-36.26,78.22c-2.77,6.18-5.64,10.15-12.94,8.43
	c-0.47-0.11-0.99-0.03-1.49,0.02c-3.57,0.38-5.69,2.55-5.66,5.74c0.04,3.26,2.15,5.42,5.81,5.46c9.21,0.1,18.43,0.09,27.64,0.01
	c3.7-0.03,5.87-2.1,6-5.29c0.14-3.31-2.11-5.56-5.87-5.95c-1.55-0.16-3.18,0.4-4.88-0.51c2.39-5.12,4.88-10.12,7.04-15.26
	c1.02-2.41,2.6-3.65,4.95-4.57c22.82-8.91,45.6-17.92,68.4-26.89c1.73-0.68,3.45-1.46,5.37-1.46c13.6,0,27.19,0.04,40.78-0.04
	c2.47-0.01,2.35,0.84,1.49,2.62c-2.04,4.26-3.99,8.57-5.91,12.89c-2.45,5.51-0.17,9.15,5.8,9.2c6.73,0.06,13.47,0.1,20.2-0.03
	c2.23-0.04,3.1,0.5,3,2.89c-0.19,4.36,0.02,8.73-0.08,13.09c-0.07,2.58,1.1,5.77-0.57,7.58c-1.4,1.52-4.5,0.3-6.84,0.49
	c-0.12,0.01-0.25,0-0.37,0.02c-3.78,0.34-6,2.58-5.87,5.91c0.12,3.23,2.25,5.27,5.97,5.31c9.22,0.08,18.44,0.09,27.65-0.01
	c3.65-0.04,5.78-2.21,5.82-5.46c0.04-3.17-2.1-5.43-5.66-5.72c-2.11-0.17-4.25-0.17-6.36-0.02c-1.95,0.13-2.57-0.54-2.54-2.51
	c0.12-6.24,0.16-12.48-0.01-18.71c-0.07-2.41,0.78-2.9,3-2.86c6.98,0.13,13.97,0.14,20.95,0.01c4.86-0.09,7.13-3.67,5.37-8.19
	c-0.58-1.5-1.36-2.93-1.97-4.42c-1.62-3.96-3.91-7.65-5.13-12.04c14.84,0,29.3,0,43.76-0.01c1.66,0,3.18,0.49,4.69,1.09
	c24.18,9.54,48.36,19.09,72.54,28.63c1.16,0.46,2.29,0.8,2.82,2.18c2.11,5.43,4.31,10.84,6.71,16.83c-2.38,0-4.13-0.13-5.85,0.02
	c-3.56,0.31-5.72,2.55-5.69,5.71c0.03,3.24,2.17,5.43,5.81,5.47c9.22,0.1,18.43,0.09,27.64,0.01c3.73-0.03,5.86-2.06,6-5.28
	C686.32,577.52,684.12,575.2,680.34,574.94z M493.45,253.63c-0.11-3.97,2.98-7.26,6.86-7.3c3.66-0.04,6.89,3.11,7,6.81
	c0.11,3.98-2.97,7.24-6.87,7.27C496.69,260.44,493.56,257.41,493.45,253.63z M391.68,338.38c-0.02-7.63,4.53-14.39,11.57-17.15
	c6.84-2.68,14.83-0.84,19.95,4.42c1.75,1.8,2.14,3.1,0.39,5.32c-5.4,6.88-9.64,14.49-12.65,22.7c-0.94,2.57-2.2,3.08-4.7,2.61
	C397.97,354.7,391.7,347.1,391.68,338.38z M358.76,541.11c6.59-14.07,12.77-27.08,18.74-40.19c1.15-2.53,1.98-2.65,4.22-1.22
	c9.54,6.08,19.2,11.97,28.81,17.96c0.8,0.5,1.86,0.75,2.35,2.17C395.07,526.83,377.28,533.82,358.76,541.11z M386.79,489.66
	c-1.5-0.92-0.61-1.58,0.1-2.27c6.55-6.46,13.12-12.91,20.12-19.78c3.37,13.51,6.66,26.73,10.19,40.88
	C406.5,501.86,396.66,495.74,386.79,489.66z M594.09,466.3c8.93,7.67,17.48,15.01,26.32,22.6c-12.41,6.88-24.43,13.54-37.11,20.56
	C586.98,494.76,590.48,480.75,594.09,466.3z M588.19,519.64c8.51-4.7,16.84-9.31,25.17-13.91c4.02-2.23,8.04-4.44,12.06-6.68
	c0.99-0.55,1.91-1.32,2.6,0.39c5.59,14,11.21,27.99,16.89,42.16C641.81,541.17,593.93,522.58,588.19,519.64z"/>
<path class="st1" d="M500.38,461.73c26.56,0,53.12,0.03,79.68-0.05c2.66-0.01,3.65,0.11,2.8,3.34
	c-4.12,15.64-7.99,31.35-11.78,47.07c-0.56,2.31-1.47,2.9-3.73,2.9c-44.64-0.06-89.28-0.06-133.91,0c-2.26,0-3.17-0.59-3.73-2.9
	c-3.82-15.85-7.74-31.67-11.85-47.44c-0.75-2.88,0.2-2.97,2.49-2.96C447.01,461.75,473.7,461.73,500.38,461.73z"/>
<path class="st2" d="M462.22,336.76c-9.64,9.83-15.33,21.44-16.88,35.25c-3.14,27.85,18.58,55.96,46.35,59.84
	c11.58,1.62,22.58,0.15,33-5.1c4.14-2.08,8.1-0.44,12.06,0.03c14.94,1.78,29.84,3.92,44.77,5.8c2.65,0.34,3.9,1.12,3.67,4.11
	c-0.34,4.33-0.19,8.7-0.25,13.05c-1.16,0.68-2.44,0.35-3.66,0.35c-49.1,0.02-98.19,0.02-147.29,0.02c-4.75,0-5.04-0.21-5.06-5.05
	c-0.06-12.96-0.25-25.92,0.04-38.88c0.5-22.2,6.84-42.43,21.21-59.76c2.63-3.18,5.58-6.04,8.6-8.83
	C459.64,336.81,460.63,335.18,462.22,336.76z"/>
<path class="st3" d="M462.22,336.76c-4.65,2.23-7.72,6.29-10.85,10.05c-10.13,12.13-16.68,26.04-19.52,41.67
	c-1.04,5.75-1.56,11.56-1.69,17.35c-0.3,13.2,0.01,26.41-0.17,39.61c-0.05,3.4,0.84,4.4,4.33,4.39
	c50.2-0.12,100.41-0.08,150.61-0.08c-0.85,1.44-2.24,0.72-3.35,0.72c-54.1,0.02-108.19-0.02-162.29,0.02c-2.53,0-3.73-0.26-3.7-3.33
	c0.17-20.32-0.15-40.64,0.18-60.95c0.68-41.46,32.4-76.5,73.63-81.73c19.89-2.52,38.37,1.49,55.45,11.96
	c0.73,0.45,1.37,1.03,2.05,1.55c-1.53,1.22-3.12,0.37-4.62,0c-20.71-5.17-40.65-2.53-60.05,5.78c-1.01,0.43-2.1,0.8-2.79,1.77
	C473.31,328.68,467.33,332.06,462.22,336.76z"/>
<path class="st2" d="M539.87,415.85c6.81-7.58,11.61-15.61,13.86-24.97c0.7-2.89,1.26-5.85,1.49-8.8c0.18-2.21,1.12-2.92,3.17-3.15
	c9.02-1.01,18.03-2.14,27.04-3.21c1.5-0.18,2.91-0.05,4.33,0.67c5.31,2.7,10.66,5.33,16.05,7.88c1.54,0.73,2.19,1.64,2.17,3.42
	c-0.1,7.47-0.08,14.94-0.01,22.4c0.01,1.56-0.35,2.64-1.93,3.14c-0.59,0.18-1.18,0.44-1.68,0.8c-10.95,7.82-22.9,8.86-35.67,5.72
	c-4.56-1.12-9.34-1.39-14.02-2.01C549.98,417.11,545.29,416.54,539.87,415.85z"/>
<path class="st2" d="M479.44,325.55c-2.21-0.91,0.08-1.13,0.29-1.24c7.69-4.2,15.94-6.81,24.52-8.47
	c14.39-2.79,28.58-1.6,42.64,2.17c16.86,10.73,27.9,25.92,34.26,44.7c0.49,1.44,0.41,2.27-1.47,2.47
	c-7.67,0.84-15.34,1.76-22.99,2.76c-2.54,0.33-2.1-1.6-2.38-2.86c-2.95-13.01-9.59-23.76-20.17-31.82
	C517.43,320.52,499.02,318.63,479.44,325.55z"/>
<path class="st2" d="M518.85,416.7c-9.81,5.44-20.11,5.67-30.65,2.76c-2.23-0.62-4.34-1.69-6.51-2.55c-1.22-2.52-0.5-5.17-0.27-7.69
	c0.73-7.9,1.44-15.81,2.16-23.71c0.14-1.5,0.28-3.01,1.9-3.78c4.79-1.04,9.64-0.46,14.45-0.47c5.07,0,10.16-0.53,15.21,0.4
	c1.34,0.53,1.83,1.66,1.93,2.95c0.77,9.92,2.07,19.79,2.54,29.73C519.65,415.2,519.71,416.11,518.85,416.7z"/>
<path class="st2" d="M489.22,334.58c7.44-2.33,14.88-2.33,22.31,0c1.77,2.21,1.53,4.97,1.76,7.5c0.73,8.17,1.45,16.34,2.26,24.5
	c0.17,1.73,0.33,3.5-0.99,4.95c-0.96,0.66-2.07,0.8-3.19,0.81c-7.29,0.09-14.57,0.08-21.86,0.01c-1.12-0.01-2.22-0.14-3.21-0.75
	c-1.25-1.12-1.33-2.65-1.17-4.11c1.08-9.95,1.62-19.94,2.87-29.87C488.15,336.49,488.39,335.42,489.22,334.58z"/>
<path class="st4" d="M478.79,539.64c1.9-4.22,3.64-8.02,5.32-11.86c0.64-1.46,1.83-1.42,3.1-1.41c8.45,0.02,16.9,0,25.35,0.02
	c1.07,0,2.31-0.32,2.93,1.02c1.67,3.6,3.58,7.11,4.9,10.84c0.78,2.2-1.51,1.34-2.4,1.35c-9.44,0.08-18.89,0.05-28.33,0.05
	C486.2,539.64,482.74,539.64,478.79,539.64z"/>
<path class="st0" d="M514.55,371.17c0.64,3.72,0.98,7.46,0.88,11.24c-10.03,0-20.07,0-30.1,0c-0.11-3.78,0.24-7.52,0.88-11.24
	C495.66,371.17,505.1,371.17,514.55,371.17z"/>
</svg>
`;

const elem = document.getElementById('globeViz2');
const moon = Globe()
  .globeImageUrl('assets/moon_texture.jpg')
  .bumpImageUrl('assets/moon_displacement_texture.jpg')
  .backgroundImageUrl('//unpkg.com/three-globe/example/img/night-sky.png')
  .showGraticules(true)
  .showAtmosphere(false) // moon has no atmosphere
  .htmlElement(d => {
    const el = document.createElement('div');
    el.innerHTML = markerSvg;
    el.style.color = d.color;
    el.style.width = `${d.size}px`;

    el.style['pointer-events'] = 'auto';
    el.style.cursor = 'pointer';
    el.onclick = () => console.info(d);
    return el;
  })
  .labelText('label')
  .labelSize(1.7)
  .labelDotRadius(0.8)
  .labelColor(d => 'white')
  .labelLabel(d => `
	  <div><b>${d.label}</b></div>
	  <div>${d.agency} - ${d.program} Program</div>
	  <div>Landing on <i>${new Date(d.date).toLocaleDateString()}</i></div>
	`)
  .onLabelClick(d => window.open("https://public.tableau.com/app/profile/abdul.muhaimin.adeeb/viz/Book5_16965654170940/Dashboard1?publish=yes", '_blank'))
  (elem);

fetch('./data/moon_landings.json').then(r => r.json()).then(landingSites => {
  moon.labelsData(landingSites);

  const gData = landingSites.map(item => ({
    lat: parseFloat(item.lat),
    //lat: (Math.random() - 0.5) * 180,
    lng: parseFloat(item.lng),
    size: 7 + Math.random() * 30,
    //color: ['red', 'white', 'blue', 'green'][Math.round(Math.random() * 3)]
  }));

  moon.htmlElementsData(gData)
});